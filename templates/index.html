<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë‹‰ë„¤ì„ ê°€ìœ„ë°”ìœ„ë³´</title>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
    <style>
        body { text-align: center; font-family: sans-serif; padding-top: 50px; background-color: #f0f2f5; }
        .game-container { background: white; display: inline-block; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .result-box { margin: 20px 0; padding: 15px; background: #e9ecef; border-radius: 10px; min-height: 50px; }
        button { font-size: 18px; padding: 10px 25px; cursor: pointer; margin: 5px; border: none; border-radius: 5px; background: #007bff; color: white; transition: 0.2s; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 id="user-display">ì ‘ì† ì¤‘...</h1>
        <div class="result-box">
            <div id="status">ê°€ìœ„, ë°”ìœ„, ë³´ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”!</div>
        </div>
        <button onclick="sendChoice('ê°€ìœ„')">âœŒï¸ ê°€ìœ„</button>
        <button onclick="sendChoice('ë°”ìœ„')">âœŠ ë°”ìœ„</button>
        <button onclick="sendChoice('ë³´')">ğŸ–ï¸ ë³´</button>
    </div>

    <script>
        const socket = io();
        let myName = "";

        // ì ‘ì†í•˜ìë§ˆì ì´ë¦„ì„ ë¬¼ì–´ë´…ë‹ˆë‹¤.
        socket.on('connect', () => {
            myName = prompt("ì‚¬ìš©í•˜ì‹¤ ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:");
            if(!myName) myName = "ìµëª…" + Math.floor(Math.random() * 1000);
            document.getElementById('user-display').innerText = `í”Œë ˆì´ì–´: ${myName}`;
            socket.emit('join', {name: myName});
        });

        function sendChoice(pick) {
            socket.emit('choice', {pick: pick});
            document.getElementById('status').innerText = "ìƒëŒ€ë°©ì˜ ì„ íƒì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...";
        }

        socket.on('update', (data) => {
            document.getElementById('status').innerText = data.msg;
        });

        socket.on('game_result', (data) => {
            document.getElementById('status').innerHTML = 
                `<h3 style="color: #d9534f;">${data.winner}</h3>
                ${data.p1_name}(${data.p1_pick}) VS ${data.p2_name}(${data.p2_pick})`;
        });
    </script>
</body>
</html>